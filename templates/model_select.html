
{% extends "base.html" %}

{% block title %}model selection{% endblock title %}

{% block content %}

<center style="text-align: center;" class="m-2">
    <div style="display: inline-block; background-color: aqua; padding: 10px;border-radius: 20px;">
        <h1 style="color: rgb(99, 90, 90);">Machine Learning For Runoff Modeling</h1>
    </div>
</center>



<div class="container p-4 " >
  <div class="row">
      <!-- <div class="col-md-4"></div> -->

      <div class="col-md-4 p-4">
        <button class="btn btn-primary">

            <a href="/" style="color: black; text-decoration: none;font-size: larger;">&larr; Back to Home</a>
        </button>
    </div>
      <div class="col-md-4 p-2" style='box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.5); border-radius: 2mm; background-color: aliceblue;'
      >
          <form action="/data" method="post" enctype="multipart/form-data">
              {% csrf_token %}
              <label for="form-select" style="font-weight: 300px;">Select Model</label>
              <select name='ml_task' class="form-select" aria-label="Default select example">
                  <option value="lstm">Long Short Term Memory (LSTM)</option>
                  <option value="ann">Artificial Neural Network (ANN)</option>
                  <option value="rf">Random Forest Regressor (RF)</option>
                  <option value="svm">Support Vector Regressor (SVR)</option>
              </select>

              <label for="form-select" style="font-weight: 300px;" class='mt-2'>Select Train Split</label>
              <select name='train_split' class="form-select" aria-label="Default select example" id='split_id'>
                  <option selected disabled>select train split</option>
                  <option value="70">70</option>
                  <option value="80">80</option>
                  <option value="90">90</option>
                  <option value="100">100</option>
              </select>
              <br>
              <p id="selectedValue"></p>
              <strong>
                  <label for="csv" style="font-weight: 300px;" class="mt-1">Upload data in csv/xls/xlsx file format</label>
              </strong>
              <input type="file" name="csv_name" accept=".csv, .xls, .xlsx" placeholder="" />
              <p><span style="color: red;">*</span> CSV or Excel file should contain only 2 columns: Date and Discharge</p>
              <p></p>
              <button type="submit" class="btn btn-primary" id="submitBtn">Upload!</button>
              
          </form>
      </div>
      <div class="col-md-4"></div>
  </div>
</div>

<center>
    <div class="container d-none" id='load_container' >
    
    <div class="row">
        <div class="col-md-4">
            hi
        </div>
        <div class="col-md-4 p-2" style="box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.5); border-radius: 2mm;background-color: aliceblue;">
            <p class="spinner-border text-primary  "  id="loadingSpinner">
        
        </p>
            <h3 id='load_id' class="">Model is Building ...</h3>
            
        </div>
        <div class="col-md-4"></div>
    </div>
    
</div>
</center>

<script>
  const trainSplitSelect = document.getElementById('split_id');
  const selectedValueParagraph = document.getElementById('selectedValue');
  const loadingSpinner = document.getElementById('loadingSpinner');
  const load = document.getElementById('load_container');
//   const submitBtn = document.getElementById('submitBtn');

  
  trainSplitSelect.addEventListener('change', function() {
    const selectedValue = this.value;
    selectedValueParagraph.textContent = `Test split ratio: ${100 - selectedValue}`;
  });

  submitBtn.addEventListener('click', function() {

    // document.getElementById('submitBtn').disabled = true;
    // Change the button color to secondary
    document.getElementById('submitBtn').classList.remove('btn-primary');
    document.getElementById('submitBtn').classList.add('btn-secondary');

    loadingSpinner.classList.remove('d-none');
    load.classList.remove('d-none');
  });
</script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
</body>
</html>

{% endblock content%}